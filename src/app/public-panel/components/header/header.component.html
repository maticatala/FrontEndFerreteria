<header class="header" >
  <div class="contenedor header-container">

    <a class="logo" routerLink="/home">
      <img src="../../../assets/images/logo2.png" alt="logo">
    </a>

    <nav class="nav" id="sidebar" #navElement>
      <div class="toggleBtn">
        <button class="ml-auto m-8" id="toggle" (click)="toggleMenu()">
          <mat-icon class="text-white">close</mat-icon>
        </button>
      </div>
      <ul class="nav-list" (click)="toggleMenu()">
        <li><a class="nav-link" routerLink="/home">inicio</a></li>
        <li><a class="nav-link" routerLink="/products">Productos</a></li>
        <li><a class="nav-link" routerLink="/about-us">Nosotros</a></li>
        <li><a class="nav-link" routerLink="/contact">Contacto</a></li>
      </ul>
    </nav>

    <div class="icons">
      <public-search-bar class="flex justify-center"/>

      <div class="flex items-center">
        <mat-icon class="cursor-pointer hover:text-blue-700" (click)="toggleCart()">shopping_cart</mat-icon>
        <div class="cart-overlay" [class.show]="isCartOpen" (click)="toggleCart()"></div>
        <div class="cart-container rounded-lg" [class.show]="isCartOpen">
          <!-- Contenido del carrito de compras aquÃ­ -->
          <div id="cartBox" class=" p-4 items-center text-center">
            <p>Carrito</p>
            <button class="absolute top-6 right-0 m-2 items-center flex text-black hover:text-gray-800 " (click)="toggleCart()">
              <mat-icon class="">close</mat-icon>
            </button>
          </div>
          <div>

          </div>
          <div id="cartBox" class="fixed bottom-5 inset-x-5 bg-orange-300 shadow-md p-4 rounded-md mt-3 z-5 flex items-center justify-center">
            <a routerLink="/products">Ver Productos</a>
          </div>
        </div>
      </div>

      <div class="flex justify-center" *ngIf="currentUser">
        <div class="d-none d-lg-block">
          <button mat-button [matMenuTriggerFor]="menu" class="flex items-center p-1">
            <mat-icon class="scale-[1.5] text-white">person</mat-icon>
            <span class="flex flex-col items-start text-xs ml-2 text-white">
              <div>{{currentUser.firstName || 'no name' | titlecase}}</div>
            </span>
          </button>
        </div>

        <mat-icon class="d-lg-none text-white" [matMenuTriggerFor]="menu">person</mat-icon>

        <mat-menu #menu="matMenu" xPosition="before">
          <button mat-menu-item (click)="Logout()" routerLink="/">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
          <button *ngIf="currentUser?.rol === 'admin'" mat-menu-item routerLink="/dashboard">
            <mat-icon>home</mat-icon>
            <span>Admin Panel</span>
          </button>
        </mat-menu>
      </div>

      <mat-icon *ngIf="!currentUser" class="cursor-pointer hover:text-blue-700" routerLink="auth/login">person</mat-icon>

      <mat-icon class="d-lg-none" (click)="toggleMenu()">menu</mat-icon>
    </div>

  </div>
</header>
